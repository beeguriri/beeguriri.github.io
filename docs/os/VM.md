---
layout: default
title: 가상메모리
nav_order: 5
parent: os
---



## 📑 가상 메모리

- 논리적 주소를 물리적 주소로 분리하여 (매핑)
- 주기억장치를 제한 없이 사용할 수 있도록 함
- 동적주소변환 : 가상 주소에서 연속적이라고 주기억장치에서도 연속적일 필요가 없음
- 블록(가상메모리의 이동단위) 사상(매핑)
  - 고정길이 블록 : 페이지
  - 가변길이 블록 : 세그먼트
  - Page fault: 프로세스에서 원하는 페이지가 주기억장치 내에 존재하지 않음


### ⭐ 페이징 기법

- 외부 단편화가 발생하지 않음
- 페이지 크기를 작게 설계함으로써 내부 단편화 줄일 수 있음

![](https://github.com/beeguriri/beeguriri.github.io/blob/main/docs/img/paging.PNG?raw=true)





### ⭐ 페이지 교체 정책

- FIFO (First In First Out) : Queue
  - Belady's anomaly : 페이지의 개수를 확장했음에도 페이지 폴트가 늘어남

- LRU (Least Recently Used) : Stack
  - 구현 오버헤드가 큼

- LFU (Least Frequently Used) : 참조 횟수에 대한 `계수기`를 가지며 그 값이 가장 작은 페이지가 교체
- NUR (Not Used Recently) : 각 페이지 당 `참조비트`, `변형비트`를 가지고 이 값으로 교체할 페이지 선택



### ⭐ 스레싱

- 페이지 교체가 너무 자주 일어나서,  프로세스가 프로그램 실행하는 시간보다 교체에 소요되는 시간이 더 큰 경우
- 프로세스 실행에 필요한 최소한의 프레임을 갖지 못한 경우
- 다중 프로그래밍의 정도가 높아져 프로세스 당 할당되는 프레임 수가 감소하는 경우
  - 다중 프로그래밍의 정도가 커질수록 스래싱 현상이 더 자주 일어남

- 페이지 부재 비율 (PFF)
  - 페이지 환경에서 프로세스의 실행을 측정하는 기준이 됨
  - PFF 높다 : 프로세스는 더 많은 프레임 필요함
  - PFF 낮다 : 프로세스에 프레임이 너무 많음



### ⭐ 세그먼테이션 기법

- 프로그램 구성하는 서브루틴, 프로시저, 함수나 모듈 등으로 세그먼트를 구성
- 프로세스에 따라 세그먼트의 크기가 다르므로 동적 분할 방법으로 할당
- 외부 단편화 발생
- 2개 이상의 다른 프로세스의 세그먼트 테이블에 있는 항목은 동일한 메모리 주소를 지정하면 공유할 수 있음



## 📑 플래시 메모리

- 전기적으로 데이터를 쓰고 지울 수 있는 비휘발성 기억 장치
- NOR형과 NAND형이 있음
- 블록 내에서 특정 단위로 읽고 쓸 수 있음
- `삭제는 블록 단위`로 해야 함
- overwrite 불가, 덮어쓰기 위해서는 삭제가 선행되어야 함
- 지우기 횟수 제한



## 📑 캐시 일관성

- 스누핑 프로토콜 : 주소 버스를 항상 감시
- 디렉토리 기반 프로토콜 : 캐시 블록의 공유 상태, 노드 등 기록
- MESI : 별도의 플래그를 할당
  - Modify : 수정 상태
  - Exclusive : 배타 상태, 유일한 복사본, 주기억장치의 내용과 동일
  - Shared : 공유 상태, 데이터가 두 개 이상의 프로세서 캐시에 적재
  - Invalid : 무효 상태, 데이터가 다른 프로세스에 의해 수정되어 무효화
