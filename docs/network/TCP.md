---
layout: default
title: TCP
nav_order: 2
parent: Network
---



## ðŸ“‘ TCP

- ì „ì†¡ê³„ì¸µ
  - ì†¡ì‹ ìžì™€ ìˆ˜ì‹ ìžë¥¼ ì—°ê²°í•˜ëŠ” í†µì‹  ì„œë¹„ìŠ¤ ì œê³µ
  - ë°ì´í„° ì „ë‹¬
  - ì „ë‹¬ë˜ëŠ” íŒ¨í‚·ì˜ ì˜¤ë¥˜ë¥¼ ê²€ì‚¬í•˜ê³  ìž¬ì „ì†¡ ìš”êµ¬ ë“±ì˜ ì œì–´ ë‹´ë‹¹

- ì—°ê²° ì§€í–¥ì  í”„ë¡œí† ì½œ
  - ë„¤íŠ¸ì›Œí¬ì— ì—°ê²° ëœ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ëž¨ ê°„ ë°ì´í„°ë¥¼
  - ì•ˆì •ì ìœ¼ë¡œ, ìˆœì„œëŒ€ë¡œ, ì—ëŸ¬ ì—†ì´ êµí™˜í•  ìˆ˜ ìžˆê²Œ í•¨

- ê°€ìƒ íšŒì„  ë°©ì‹ ì œê³µ
  - 3 Way Hand-shake ê³¼ì •ì„ í†µí•´ ì—°ê²° ì„¤ì •
  - 4 Way Hand-shake ê³¼ì •ì„ í†µí•´ ì—°ê²° í•´ì œ

- íë¦„ ì œì–´ : `ì†¡ì‹ ì¸¡`ê³¼ `ìˆ˜ì‹ ì¸¡`ì˜ ë°ì´í„° ì²˜ë¦¬ ì†ë„ ì°¨ì´ í•´ê²°
- ì˜¤ë¥˜ ì œì–´
- í˜¼ìž¡ ì œì–´ : `ì†¡ì‹ ì¸¡` ë°ì´í„° ì „ë‹¬ê³¼ `ë„¤íŠ¸ì›Œí¬` ë°ì´í„° ì²˜ë¦¬ ì†ë„ ì°¨ì´ í•´ê²°
- ì „ì´ì¤‘ (ì–‘ë°©í–¥) ì „ì†¡
- ì ëŒ€ì  ì „ì†¡ : ê° ì—°ê²°ì´ ì •í™•ížˆ 2ê°œì˜ ì¢…ë‹¨ì 



### â­ ì—°ê²° ì„¤ì • / í•´ì œ

![](https://github.com/beeguriri/beeguriri.github.io/blob/main/docs/img/3way.png?raw=true)

- 3-way ì—°ê²°
  - í´ë¼ì´ì–¸íŠ¸ê°€ `SYN` ë³´ë‚´ê³  `SYN_SENT` ìƒíƒœë¡œ ëŒ€ê¸°
  - ì„œë²„ëŠ” `SYN_RECEIVED` ìƒíƒœë¡œ ë³€ê²½í•˜ê³  `SYN+ACK`ì „ì†¡
  - `SYN+ACK` ë°›ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” `Established`ìƒíƒœë¡œ ë³€ê²½í•˜ê³  `ACK` ì „ì†¡
  - `ACK`ë°›ì€ ì„œë²„ëŠ” `Established`ìƒíƒœë¡œ ë³€ê²½

- 4-way ì—°ê²° í•´ì œ
  - í´ë¼ì´ì–¸íŠ¸ê°€ `FIN` ë³´ë‚´ê³  `FIN_WAIT_1` ìƒíƒœë¡œ ëŒ€ê¸°
  - ì„œë²„ëŠ” `CLOSE_WAIT` ìƒíƒœë¡œ ë³€ê²½í•˜ê³  `ACK` ì „ë‹¬
  - `ACK` ë°›ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” `FIN_WAIT_2`ìƒíƒœë¡œ ë³€ê²½
  - ì„œë²„ëŠ” ì¢…ë£Œ í”„ë¡œì„¸ìŠ¤ ì§„í–‰ í›„ `FIN` ë³´ë‚´ê³  `LAST_ACK`ë¡œ ë³€ê²½
  - `FIN` ë°›ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” `ACK` ì „ì†¡í•˜ê³  `TIME-WAIT`ë¡œ ë³€ê²½ í›„ ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ë©´ `CLOSE`ë¡œ ë³€ê²½
    - `TIME_WAIT` : ë¨¼ì € ì—°ê²°ì„ ëŠëŠ” ìª½ì—ì„œ ìƒì„±ë˜ëŠ” ì†Œì¼“. í˜¹ì‹œ ëª¨ë¥¼ ì „ì†¡ ì‹¤íŒ¨ ëŒ€ë¹„

  - `ACK` ë°›ì€ ì„œë²„ëŠ” `CLOSE`ë¡œ ë³€ê²½




### â­ íë¦„ ì œì–´

- ì†¡ì‹ ì¸¡ê³¼ ìˆ˜ì‹ ì¸¡ì˜ `ë°ì´í„° ì²˜ë¦¬ ì†ë„`ê°€ ë‹¤ë¥¼ ë•Œ
- ìˆ˜ì‹ ì¸¡ì— ë²„í¼ ì˜¤ë²„í”Œë¡œìš° ë¬¸ì œ ë°œìƒ
- `ìœˆë„ìš° í¬ê¸°`ë¡œ ì†¡ì‹  ì¸¡ì˜ ë°ì´í„° ì „ì†¡ëŸ‰ ì¡°ì ˆ
- í•´ê²° ë°©ë²•
  - Stop & Wait
  - Sliding window
    - ìˆ˜ì‹ ì¸¡ì´ í•œë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìžˆëŠ” ë°ì´í„°ì˜ ì–‘(ìœˆë„ìš° í¬ê¸°)ë¥¼ í†µì‹  ì‹œ ì†¡ì‹ ì¸¡ì— ì „ë‹¬
    - íŒ¨í‚·ì˜ ì™•ë³µì‹œê°„ì´ ê¸¸ë©´ ë„¤íŠ¸ì›Œí¬ í˜¼ìž¡í•˜ë‹¤ê³  íŒë‹¨í•˜ì—¬ ìœˆë„ìš° í¬ê¸°ë¥¼ ì‹¤ì œ ë²„í¼ í¬ê¸°ë³´ë‹¤ ìž‘ê²Œ ì„¤ì •
    - í†µì‹  ê³¼ì • ì¤‘ì—ë„ ë„¤íŠ¸ì›Œí¬ í˜¼ìž¡ ë“±ì˜ ì¡°ê±´ì„ í†µí•´ ìœˆë„ìš° í¬ê¸° `ìœ ë™ì `ìœ¼ë¡œ ì„¤ì •



### â­ ì˜¤ë¥˜ ì œì–´

- ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ë°ì´í„° ìž¬ì „ì†¡
- ì†¡ì‹ ì¸¡ì´ ë³´ë‚¸ ë°ì´í„°ê°€ ìœ ì‹¤ë˜ê±°ë‚˜, ìˆ˜ì‹ ì¸¡ì´ ë³´ë‚¸ ACK ë°ì´í„°ê°€ ìœ ì‹¤ ë  ê²½ìš° ì¤‘ë³µëœ ACKë¥¼ ë°›ìŒ
- í•´ê²° ë°©ë²•
  - Stop & Wait : ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ time-outì´ ë°œìƒí•˜ë©´ ì´ì „ ë°ì´í„° ìž¬ì „ì†¡
  - GoBack N : (ì—°ì†ìœ¼ë¡œ ë°ì´í„° ë³´ë‚¼ ë•Œ) ì˜¤ë¥˜ë°œìƒ ì§€ì ë¶€í„° ìž¬ì „ì†¡
  - Selective Repeat : ì˜¤ë¥˜ê°€ ë°œìƒí•œ ë°ì´í„°ë§Œ ìž¬ì „ì†¡



### â­ í˜¼ìž¡ ì œì–´

- ë„¤íŠ¸ì›Œí¬ì˜ í˜¼ìž¡ì„ í”¼í•˜ê¸° ìœ„í•´ ì†¡ì‹ ì¸¡ì—ì„œ ë³´ë‚´ëŠ” ë°ì´í„°ì˜ `ì „ì†¡ì†ë„`ë¥¼ ê°•ì œë¡œ ì¤„ìž„

- ë„¤íŠ¸ì›Œí¬ ë‚´ì˜ íŒ¨í‚·ìˆ˜ê°€ ê³¼ë„í•˜ê²Œ ì¦ê°€í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•¨

- í˜¼ìž¡ ì•Œë¦¼ ë™ê¸° ë¬¸ìž

  - ECE  : í˜¼ìž¡ ì•Œë¦¼
  - CWR : ECE ìˆ˜ì‹ í•œ ì†¡ì‹  í”„ë¡œì„¸ìŠ¤ê°€ ì „ì†¡ ìœˆë„ìš° í¬ê¸° ì¤„ì˜€ìŒì„ í†µì§€

- í•´ê²° ë°©ë²•

  - AIMD
    - ì²˜ìŒ íŒ¨í‚·ì„ í•˜ë‚˜ ë³´ë‚´ê³  ë¬¸ì œ ì—†ìœ¼ë©´ `1ê°œì”©` ì¦ê°€ì‹œì¼œì„œ ë³´ëƒ„
    - íŒ¨í‚· ì „ì†¡ ì‹¤íŒ¨ ë˜ëŠ” ì¼ì •ì‹œê°„ ê²½ê³¼ ì‹œ íŒ¨í‚·í¬ê¸°(ìœˆë„ìš° í¬ê¸°) `ì ˆë°˜`ìœ¼ë¡œ ì¤„ìž„

  - Slow start
    - ìœˆë„ìš° í¬ê¸°ë¥¼ 1, 2, 4, 8, ... `2ë°°` ì¦ê°€ ì‹œì¼œì„œ ë³´ëƒ„
    - í˜¼ìž¡ ê°ì§€ë˜ë©´ ìœˆë„ìš° í¬ê¸° `1ë¡œ` ì¤„ìž„



## ðŸ“‘ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìºë‹

### â­ TCP Open Scan

- ì™„ì „í•œ TCP ì—°ê²°ì„ ë§ºì–´ì„œ í¬íŠ¸ì˜ í™œì„±í™” ì—¬ë¶€ íŒë‹¨
- 3-way handshaking ê³¼ì •ì„ ìˆ˜í–‰
- ì†ë„ê°€ ëŠë¦¬ê³  ë¡œê·¸ê°€ ë‚¨ìŒ



### â­ TCP SYN Scan (=Half open scan)

- ì„¸ì…˜ì„ ì™„ì „ížˆ ì—°ê²°í•˜ì§€ ì•Šê³  í¬íŠ¸ì˜ í™œì„±í™” ì—¬ë¶€ íŒë‹¨

- ê³µê²©ìžê°€ SYN íŒ¨í‚·ì„ ë³´ë‚´ë©´

- í¬íŠ¸ ì—´ë¦¼

  - ê³µê²© ëŒ€ìƒìœ¼ë¡œë¶€í„° `SYN/ACK`ë°›ìŒ
  - ê·¸ ì¦‰ì‹œ `RST`íŒ¨í‚·ì„ ë³´ë‚´ ì—°ê²°ì„ ëŠìŒ
  - ë¡œê·¸ë¥¼ ë‚¨ê¸°ì§€ ì•ŠìŒ (ìŠ¤í…”ìŠ¤ ìŠ¤ìº”)

- í¬íŠ¸ ë‹«íž˜

  - ê³µê²© ëŒ€ìƒìœ¼ë¡œë¶€í„° `RST/ACK`ë°›ìŒ

  

### â­ TCP FIN/NULL/XMAS Scan

- TCP í—¤ë”ë¥¼ ì¡°ìž‘í•˜ì—¬ íŠ¹ìˆ˜í•œ íŒ¨í‚·ì„ ë§Œë“¤ì–´ ë³´ë‚¸ í›„ ê·¸ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ í¬íŠ¸ í™œì„±í™” ì—¬ë¶€ íŒë‹¨
- ì„¸ì…˜ì„ ì™„ì „ížˆ ì—°ê²°í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¡œê·¸ ë‚¨ì§€ ì•ŠìŒ
- FIN : TCP í—¤ë”ì— `FIN í”Œëž˜ê·¸` ì„¤ì •í•˜ì—¬ ì „ì†¡
- NULL : TCP í—¤ë”ì— `í”Œëž˜ê·¸ ê°’ ì„¤ì •í•˜ì§€ ì•Šê³ ` ì „ì†¡
- XMAS : TCP í—¤ë”ì— í”Œëž˜ê·¸ ê°’ì„ ëª¨ë‘ ì„¤ì •í•˜ê±°ë‚˜ ì¼ë¶€ ê°’ì„ ì„¤ì •í•˜ì—¬ ì „ì†¡
- í¬íŠ¸ ì—´ë¦¼ : `ì‘ë‹µ ì—†ìŒ`
- í¬íŠ¸ ë‹«íž˜ : `RST` ì‘ë‹µ



### â­ TCP ACK Scan

- ëª¨ë“  í¬íŠ¸ì— ìˆ˜ì²œ ê°œì˜ ACK íŒ¨í‚·ì„ ì „ì†¡í•˜ê³  ê·¸ `ì‘ë‹µ íŒ¨í‚·ìœ¼ë¡œ ì˜¤ëŠ” RST íŒ¨í‚·`ì˜ TTLê³¼ ìœˆë„ìš° í•„ë“œ ë¶„ì„



### â­ TCP ë‹¨íŽ¸í™” Scan

- TCP í—¤ë”ë¥¼ ë‘ ê°œì˜ íŒ¨í‚·ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì „ì†¡

- ì²«ë²ˆì§¸ íŒ¨í‚· : IPì£¼ì†Œë§Œ ì €ìž¥ -> í¬íŠ¸ ì •ë³´ê°€ ì—†ì–´ ë°©í™”ë²½ í†µê³¼

- ë‘ë²ˆì§¸ íŒ¨í‚· : port ì£¼ì†Œë§Œ ì €ìž¥ -> ip ì£¼ì†Œ ì •ë³´ê°€ ì—†ì–´ ë°©í™”ë²½ í†µê³¼


