---
layout: default
title: 대칭키
nav_order: 6
parent: Information Security
---



## 📑 스트림 암호

### ⭐ DES

- 평문 64bit
- 암호문 64bit
- rount 16
- Feistel

### ⭐ AES

- 평문 128bit
- 암호문 128 / 192 / 256 bit
- round 10 / 12 / 14
- 라운드 키 128bit
- SPB (암복호 알고리즘이 같지는 않음)
- 바이트 치환(대치), 행 이동(전치), 열 혼합 (행렬 곱셈 연산,  뒤섞음), 키덧셈(XOR)





## 📑 대칭키 암호 운영 모드

| 모드 | 유형   | 수식표현                                     | IV   | 오류전파 | 암호병행 | 복호병행 |
| ---- | ------ | -------------------------------------------- | ---- | -------- | -------- | -------- |
| ECB  | Block  | C_i = Ek(P_i)<br />P_i = Dk(C_i)             | X    | X        | O        | O        |
| EBC  | Block  | C_i = Ek(P_i+C_i-1)<br />P_i = Dk(C_i)+C_i-1 | O    | O        | X        | O        |
| CFB  | Stream | C_i = P_i+Ek(C_i-1)<br />P_i = C_i+Ek(C_i-1) | O    | O        | X        | O        |
| OFB  | Stream | C_i = P_i+Ek(S_i-1)<br />P_i = C_i+Ek(S_i-1) | O    | X        | X        | X        |
| CTR  | Stream | C_i = P_i+Ek(N_i)<br />P_i = C_i+Ek(N_i)     | O    | X        | O        | O        |

- EBC : 평문 블록을 `이전 암호문 블록`과 XOR 연산
- CFB : 이전 암호문이 다음 암호문의 입력이 됨



## 📑 자기 동기식 스트림 암호

- `비동기식` 스트림 암호라고도 함
- 키 스트림 생성할 때 암호 키와 함께 `이전에 암호화 된 문자열` 일부를 사용
- 각 스트림의 비트는 이전 평문 또는 암호문에 종속적
- 특정 바이트에 오류가 발생하더라도 그 바이트가 더 이상 내부 상태에 영향을 주지 않는 상황이 되면 `자동적으로 암호화 측과 복호화 측의 키 스트림이 동기화 됨`
- 전송 도중 암호문의 비트에 오류가 발생하여도, `일부분만이 복호화에 실패`



## 📑 OTP(One Time Password)

- 대칭키(블럭 암호화) 또는 일방향 해시 함수 사용
- 서버와 OTP 토큰 간 공유 된 `OTP 비밀키`와 `부가정보`로 구성
- 부가 정보는 OTP 토큰과 인증 서버 간의 동기화 여부에 따라 구분
  - 비동기화 :질의-응답 방식
  - 동기화 : 시각 동기화, 이벤트 동기화, 조합

### ⭐ OPT 생성 흐름

- 연계정보 생성 : 부가정보(시각, 이벤트 등) 생성
- 생성 알고리즘 : 연계정보를 암호화하여 암호문 생성
- 추출 알고리즘 : 생성 된 암호문에서 OTP 추출



## 📑 커버로스

- `티켓 인증 방식`의 `대칭키 기반` `키 확립 프로토콜`
- 인증 서버, 티켓 발급 서버, 서비스 서버
- 클라이언트와 서버 `상호 인증`
- 중앙집중형 인증 방식으로, 한번의 인증으로 여러 서비스 이용할 수 있는 통합인증기능(SSO) 제공
- 사용자가 인증 서버에 인증을 성공하면 `TGS`라는 티켓을 발급
  - 유저아이디, 호스트IP, 타임스탬프, 티켓수명, 세션키 등 포함 => `서버의 비밀키`로 암호화
- 사용자는 `TGS`를 티켓발급서버에 전송하여 `SGT` 요청
- 티켓 발급 서버에서는 `TGS`를 통하여 접근 권한 여부 확인 후 `SGT` 발급
- 클라이언트는 `SGT`로 각종 응용 서버 접근

### ⭐ 동작 과정 상세

- 사용자-클라이언트 기반 로그인
  - 클라이언트는 사용자로 부터 아이디, 비밀번호를 입력 받음
  - 비밀번호를 대칭키로 변환하여 암호키 생성
- 클라이언트 인증
  - 클라이언트는 인증서버에게 사용자 아이디 전송
  - 인증서버는 사용자 아이디로 DB조회 후 `TGS Session Key` , `TGT` 생성 후 전송
- 고객-서비스 인증
  - 클라이언트는 티켓서버에 `TGS Session Key`, `TGT` 보내 권한 요청
  - 티켓서버는  `SS Session Key`, `SGT` 생성 후 전송
- 고객-서비스 요청
  - 클라이언트는 서비스서버에 `SS Session Key`, `SGT`전송
  - 서비스서버는 권한 인증
